/**
 * -------------------------------------------------
 * *ä¸€ã€æŽ˜é‡‘æ€è·¯
 */

// --------------------------
// # ä»Šå¤©æˆ‘å¯¹äºŽé˜²æŠ–å’ŒèŠ‚æµçš„ç†è§£ï¼š

// é˜²æŠ–æ˜¯ä»€ä¹ˆï¼Ÿé˜²æŠ–å°±æ˜¯ä¸€æ¬¡è§¦å‘åŽï¼Œå†æ¬¡è§¦å‘é‡æ–°è®¡æ—¶ã€‚
// èŠ‚æµæ˜¯ä»€ä¹ˆï¼ŸèŠ‚æµå°±æ˜¯ä¸€æ¬¡è§¦å‘åŽï¼Œå†æ¬¡è§¦å‘å…¨éƒ¨å¿½ç•¥ã€‚

// # åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œè¦çœ‹éœ€æ±‚æ˜¯ä»€ä¹ˆã€‚

// æ¯”å¦‚ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œ
// å¤šæ¬¡è¾“å…¥è¯·æ±‚æœåŠ¡ç«¯ï¼Œæƒ³è¦çš„æ˜¯æœ€åŽä¸€æ¬¡è¾“å…¥è¯·æ±‚æœåŠ¡ç«¯çš„ç»“æžœã€‚
// å†æ¯”å¦‚ä¸€ä¸ªæŒ‰é’®æäº¤æ“ä½œï¼Œ
// å¤šæ¬¡æäº¤è¯·æ±‚æœåŠ¡ç«¯ï¼Œæƒ³è¦çš„æ˜¯ç¬¬ä¸€æ¬¡æäº¤è¯·æ±‚æœåŠ¡ç«¯çš„ç»“æžœã€‚

// # æˆ‘çš„è®°å¿†æ€è·¯æ˜¯ï¼š

// å’šå’šå’šï¼Œæƒ³è¦æœ€åŽä¸€ä¸ªå’šï¼Œå‰é¢å¦‚æžœéƒ½è¦äº†ï¼Œå°±ä¼šæŠ–åŠ¨ï¼Œé˜²å‰ä¸¤ä¸ªå’šï¼Œæ‰€ä»¥é˜²æŠ–ï¼šä¹Ÿå°±æ˜¯ä¸€æ¬¡è§¦å‘åŽï¼Œå†æ¬¡è§¦å‘é‡æ–°è®¡æ—¶ã€‚

// å’šå’šå’šï¼Œæƒ³è¦ç¬¬ä¸€ä¸ªå’šï¼ŒçœæŽ‰åŽä¸¤ä¸ªå†¬ï¼Œçœæµï¼Œæ‰€ä»¥èŠ‚æµï¼šä¹Ÿå°±æ˜¯ä¸€æ¬¡è§¦å‘åŽï¼Œå†æ¬¡è§¦å‘å…¨éƒ¨å¿½ç•¥ã€‚

// # æ‰€ä»¥æ€»ç»“

// é˜²æŠ–å’ŒèŠ‚æµï¼Œçœ‹éœ€æ±‚ã€‚

// --------------------------
// ðŸ˜¯å“¦Ô…(Â¯ã…‚Â¯Ô…)æˆ‘åˆæœ‰ä¸€ä¸ªæƒ³æ³•ï¼š
// *æŠ–é˜²èŠ‚æµ

/**
 * -------------------------------------------------
 * *äºŒã€çªå‡»è¯¾hand-äº‘éš
 */
// *1.é˜²æŠ– => ä»€ä¹ˆæ˜¯é˜²æŠ–ï¼Ÿ => åœºæ™¯ï¼šä¸€äº›ç‚¹å‡»è¯·æ±‚ä¸Š
//     1ï¼‰å‡½æ•°å¯ä»¥ä½¿äº‹ä»¶è¢«è§¦å‘nç§’ä¹‹åŽå†è¿›è¡Œå¤„ç†
//     2) nç§’å†…äº‹ä»¶å†æ¬¡è¢«è§¦å‘åˆ™é‡æ–°è®¡æ—¶

// ---------------------
// é˜²æŠ–å‡½æ•°çš„å®žçŽ°
// è¾“å…¥ï¼šé˜²æŠ–å‡½æ•°fnï¼›ç­‰å¾…çš„ç§’æ•°
// è¾“å‡ºï¼šå‡½æ•°çš„æ‰§è¡Œ
function debounce(fn, wait) {
  // 1. éœ€è¦ä¸€ä¸ªå®šæ—¶å™¨
  let timer = null

  return function () {
    let _this = this,
      args = arguments

    // 3. ä¸­é€”å¦‚æžœå†æ¬¡è§¦å‘ï¼Œåˆ™æ¸…ç©ºé‡æ–°è®¡æ—¶
    if (timer) {
      clearTimeout(timer)
      timer = null
    }

    // 2. å°†å®šæ—¶å™¨è®¾ç½®æˆæŒ‡å®šé—´éš”æ—¶é—´åŽæ‰§è¡Œ
    timer = setTimeout(() => {
      fn.apply(_this, args)
    }, wait)
  }
}

// *2.èŠ‚æµçš„æ¦‚å¿µ
// èŠ‚æµæŒ‡çš„æ˜¯è§„å®šçš„ä¸€ä¸ªæ—¶é—´ï¼Œè§¦å‘ä¸€æ¬¡ä¹‹åŽï¼Œå¦‚æžœåœ¨è§„å®šçš„æ—¶é—´å†…é‡å¤è¢«è§¦å‘äº†ï¼Œåªæœ‰ä¸€æ¬¡æ˜¯ç”Ÿæ•ˆçš„ã€‚
// => åœºæ™¯ï¼šèŠ‚æµä½¿ç”¨åœ¨scrollå‡½æ•°çš„äº‹ä»¶ç›‘å¬

// ---------------------
// èŠ‚æµå‡½æ•°çš„å®žçŽ°
// è¾“å…¥ï¼šèŠ‚æµå‡½æ•°fnï¼›èŠ‚æµå»¶æ—¶
// è¾“å‡ºï¼šå‡½æ•°çš„æ‰§è¡Œ
function throttle(fn, delay) {
  // 1. èŽ·å–æ‰§è¡Œæ—¶é—´çš„æ—¶é—´ç‚¹
  let currentTime = Date.now()

  return function () {
    // 3. èŽ·å–å½“å‰æ—¶é—´ç‚¹
    let nowTime = Date.now()
    let _this = this,
      args = arguments

    // 2. ä¸¤æ¬¡é‡å¤æ“ä½œçš„æ—¶é—´é—´éš”ä¸ŽèŠ‚æµå»¶æ—¶çš„å…³ç³»
    if (nowTime - currentTime >= delay) {
      currentTime = Date.now()
      return fn.apply(_this, args)
    }
  }
}
